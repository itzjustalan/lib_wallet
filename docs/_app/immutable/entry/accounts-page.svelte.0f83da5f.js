import{S as M,i as P,s as T,k as v,q as k,a as B,l as $,m as S,r as w,h as p,c as E,n as q,b as g,C as h,g as I,f as j,d as C,K as G,F as H,o as J,u as L,E as N,y as O,z as Q,A as U,B as W,v as X}from"../chunks/index.8038583f.js";import{a as Y}from"../chunks/account.service.18352c75.js";import{a as y}from"../chunks/app.150f96e8.js";import{b as Z}from"../chunks/paths.362d6e94.js";import{I as x}from"../chunks/Item.24a10304.js";function R(r,e,a){const o=r.slice();return o[6]=e[a],o}function V(r){let e,a=r[1].account.name+"",o,t,u;return{c(){e=k("selected account: "),o=k(a),t=k(" Account"),u=v("br")},l(l){e=w(l,"selected account: "),o=w(l,a),t=w(l," Account"),u=$(l,"BR",{})},m(l,f){g(l,e,f),g(l,o,f),g(l,t,f),g(l,u,f)},p(l,f){f&2&&a!==(a=l[1].account.name+"")&&L(o,a)},d(l){l&&p(e),l&&p(o),l&&p(t),l&&p(u)}}}function z(r){let e,a;return{c(){e=v("a"),a=k("create new bank account!!"),this.h()},l(o){e=$(o,"A",{href:!0});var t=S(e);a=w(t,"create new bank account!!"),t.forEach(p),this.h()},h(){q(e,"href",Z+"/accounts/new")},m(o,t){g(o,e,t),h(e,a)},p:N,d(o){o&&p(e)}}}function F(r){let e,a;function o(){return r[2](r[6])}return e=new x({props:{text:r[6].name,onclick:o}}),{c(){O(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,u){U(e,t,u),a=!0},p(t,u){r=t;const l={};u&1&&(l.text=r[6].name),u&1&&(l.onclick=o),e.$set(l)},i(t){a||(I(e.$$.fragment,t),a=!0)},o(t){C(e.$$.fragment,t),a=!1},d(t){W(e,t)}}}function ee(r){let e,a,o,t,u,l,f,D,A,m=r[1].account&&V(r),_=!r[0].length&&z(),d=r[0],s=[];for(let n=0;n<d.length;n+=1)s[n]=F(R(r,d,n));const K=n=>C(s[n],1,1,()=>{s[n]=null});return{c(){e=v("div"),a=v("div"),o=k("Accounts"),t=B(),m&&m.c(),u=B(),_&&_.c(),l=B();for(let n=0;n<s.length;n+=1)s[n].c();f=B(),D=v("br"),this.h()},l(n){e=$(n,"DIV",{class:!0});var c=S(e);a=$(c,"DIV",{class:!0});var i=S(a);o=w(i,"Accounts"),i.forEach(p),t=E(c),m&&m.l(c),u=E(c),_&&_.l(c),l=E(c);for(let b=0;b<s.length;b+=1)s[b].l(c);f=E(c),D=$(c,"BR",{}),c.forEach(p),this.h()},h(){q(a,"class","page-title"),q(e,"class","page")},m(n,c){g(n,e,c),h(e,a),h(a,o),h(e,t),m&&m.m(e,null),h(e,u),_&&_.m(e,null),h(e,l);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);h(e,f),h(e,D),A=!0},p(n,[c]){if(n[1].account?m?m.p(n,c):(m=V(n),m.c(),m.m(e,u)):m&&(m.d(1),m=null),n[0].length?_&&(_.d(1),_=null):_?_.p(n,c):(_=z(),_.c(),_.m(e,l)),c&1){d=n[0];let i;for(i=0;i<d.length;i+=1){const b=R(n,d,i);s[i]?(s[i].p(b,c),I(s[i],1)):(s[i]=F(b),s[i].c(),I(s[i],1),s[i].m(e,f))}for(X(),i=d.length;i<s.length;i+=1)K(i);j()}},i(n){if(!A){for(let c=0;c<d.length;c+=1)I(s[c]);A=!0}},o(n){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)C(s[c]);A=!1},d(n){n&&p(e),m&&m.d(),_&&_.d(),G(s,n)}}}function te(r,e,a){let o;H(r,y,f=>a(1,o=f));let t=[];"indexedDB"in window||alert("This browser doesn't support IndexedDB"),J(async()=>{await u()});const u=async()=>{const f=await Y.findAll();f instanceof Error?alert(f.message):a(0,t=f),t.length&&y.setAccount(t[0])};return[t,o,f=>y.setAccount(f)]}class se extends M{constructor(e){super(),P(this,e,te,ee,T,{})}}export{se as default};
